(function(n){n.fn.GWProjectPeriodSelector=function(t){var u={width:90,valueYear:0,valueMonth:0,addOnPosition:"right"},f=arguments,i=n(this),e=function(){return n(".gwProjectPeriodSelector-form").text()?i.val():""},o=function(){n(".gwProjectPeriodSelector-form",i).html("");i.val({year:-1,month:-1})},r={getSelectedProjectPeriod:e,setNullProjectPeriod:o};return typeof t=="string"&&n.isFunction(r[t])?r[t].apply(this,Array.prototype.slice.call(f,1)):this.each(function(){var i=n(this),r=n.extend(u,t);i.settings=r;var e=function(){var u,t,f;i.html("");i.addClass("gwProjectPeriodSelector");r.addOnPosition=="mid"?i.addClass("gwProjectPeriodSelector-mid"):i.addClass("gwProjectPeriodSelector-right");u=n('<div type="text" readonly="readonly" ><\/div>').addClass("gwProjectPeriodSelector-form form-control");r.addOnPosition=="mid"?u.addClass("gwProjectPeriodSelector-form-mid"):u.addClass("gwProjectPeriodSelector-form-right");typeof r.width=="number"&&r.width>=103&&u.css("width",r.width+"px");i.append(u);t=n('<div class="gwProjectPeriodSelector-dropdown gwProjectPeriodSelector-dropdown-bottom-right gwProjectPeriodSelector-dropdown-menu"> <div class="gwProjectPeriodSelector-label"><table class="table-condensed year-sel"><thead><tr><th class="switch" colspan="5">'+r.valueYear+'年<\/th><\/tr><\/thead><tbody><tr><td colspan="7"><span class="year year0" data-year = "0">0<\/span><span class="year year1" data-year = "1">1<\/span><span class="year year2" data-year = "2">2<\/span><span class="year year3" data-year = "3">3<\/span><span class="year year4" data-year = "4">4<\/span><span class="year year5" data-year = "5">5<\/span><span class="year year6" data-year = "6">6<\/span><span class="year year7" data-year = "7">7<\/span><span class="year year8" data-year = "8">8<\/span><span class="year year9" data-year = "9">9<\/span><span class="year year10" data-year = "10">10<\/span><\/td><\/tr><\/tbody><\/table><\/div><div class="gwProjectPeriodSelector-label"><table class="table-condensed month-sel"><thead><tr><th class="switch" colspan="5">'+r.valueMonth+'个月<\/th><\/tr><\/thead><tbody><tr><td colspan="7"><span class="month month0" data-month = "0">0<\/span><span class="month month1" data-month = "1">1<\/span><span class="month month2" data-month = "2">2<\/span><span class="month month3" data-month = "3">3<\/span><span class="month month4" data-month = "4">4<\/span><span class="month month5" data-month = "5">5<\/span><span class="month month6" data-month = "6">6<\/span><span class="month month7" data-month = "7">7<\/span><span class="month month8" data-month = "8">8<\/span><span class="month month9" data-month = "9">9<\/span><span class="month month10" data-month = "10">10<\/span><span class="month month11" data-month = "11">11<\/span><\/td><\/tr><\/tbody><\/table><\/div><\/div>');f={year:-1,month:-1};typeof r.valueYear=="number"&&typeof r.valueMonth=="number"&&(r.valueYear>0&&r.valueYear<=10?(n(".year.year"+r.valueYear,t).addClass("active"),n(".year-sel .switch",i).text(r.valueYear+"年"),n(".gwProjectPeriodSelector-form",i).html(r.valueYear+"年"),f.year=r.valueYear):(n(".year.year0",t).addClass("active"),n(".year-sel .switch",i).text("0年"),n(".gwProjectPeriodSelector-form",i).html("")),r.valueMonth>0&&r.valueMonth<=11?(n(".month.month"+r.valueMonth,t).addClass("active"),n(".month-sel .switch",i).text(r.valueMonth+"个月"),n(".gwProjectPeriodSelector-form",i).append(r.valueMonth+"个月"),f.month=r.valueMonth):(n(".month.month0",t).addClass("active"),n(".month-sel .switch",i).text("0个月")));i.val(f);i.append(t)},o=function(){return n(".gwProjectPeriodSelector-dropdown-menu",i).css("display")=="none"?(n(".gwProjectPeriodSelector-dropdown-menu",i).css("display","block"),!0):!1},f=function(){return n(".gwProjectPeriodSelector-dropdown-menu",i).css("display")=="block"?(n(".gwProjectPeriodSelector-dropdown-menu",i).css("display","none"),!0):!1},s=function(){var t="";n(".year.active",i).text()!="0"&&(t+=n(".year.active",i).text()+"年");n(".month.active",i).text()!="0"&&(t+=n(".month.active",i).text()+"个月");n(".gwProjectPeriodSelector-form",i).text(t);i.val({year:n(".year.active",i).text(),month:n(".month.active",i).text()})},c=function(){return typeof r.onSelect=="function"?r.onSelect()==!1?!1:!0:!0},h=function(){n(".gwProjectPeriodSelector-form",i).on("click",function(){f()||o()});n(".year",i).on("click",function(){n(".year",i).removeClass("active");n(this).addClass("active");n(".year-sel .switch",i).text(n(this).text()+"年")});n(".month",i).on("click",function(){n(".month",i).removeClass("active");n(this).addClass("active");n(".month-sel .switch",i).text(n(this).text()+"个月");f();s()});n(document).on("click",function(t){(i.find(n(t.target)).length==0||n(t.target).closest(".gwProjectPeriodSelector").length==0)&&f()})};e();h()})}})(jQuery);