(function(n){n.fn.GWSelectSeason=function(t){var u={width:130,valueYear:"",addOnPosition:"right",onSelect:null,valueSeason:1},f=arguments,i=this,e=function(){return n(".gwSelectSeason-form").text()?i.val():""},o=function(){n(".gwSelectSeason-form",i).text("");i.val("")},r={getSelectSeason:e,setDefaultSeason:o};return typeof t=="string"&&n.isFunction(r[t])?r[t].apply(this,Array.prototype.slice.call(f,1)):this.each(function(){var r=n(this),f=n.extend(u,t);r.settings=f;var s=function(){var i,t;r.html("");r.addClass("gwSelectSeason");f.addOnPosition=="mid"?r.addClass("gwSelectSeason-mid"):r.addClass("gwSelectSeason-right");i=n('<div type="text" readonly="readonly" ><\/div>').addClass("gwSelectSeason-form form-control");f.addOnPosition=="mid"?i.addClass("gwSelectSeason-form-mid"):i.addClass("gwSelectSeason-form-right");typeof f.width=="number"&&f.width>=130&&i.css("width",f.width+"px");r.append(i);t=n('<div class="gwSelectSeason-dropdown gwSelectSeason-dropdown-bottom-right gwSelectSeason-dropdown-menu"><div class="gwSelectSeason-months"><table class="table-condensed"><thead><tr><th class="prev"><span class="glyphicon glyphicon-arrow-left"><\/span><\/th><th class="switch" colspan="5"><\/th><th class="next"><span class="glyphicon glyphicon-arrow-right"><\/span><\/th><\/tr><\/thead><tbody> <tr> <td colspan="7"> <span class="season season1" data-season = "1">第一季度<\/span> <span class="season season2" data-season = "2">第二季度<\/span> <span class="season season3" data-season = "3">第三季度<\/span> <span class="season season4" data-season = "4">第四季度<\/span> <\/td> <\/tr><\/tbody><\/table><\/div> <\/div>');f.valueYear>1900?n(".switch",t).text(f.valueYear):n(".switch",t).text((new Date).getFullYear());f.valueSeason>0&&f.valueSeason<5?n(".season.season"+f.valueSeason,t).addClass("active"):n(".season.season1",t).addClass("active");r.append(t)},h=function(){return n(".gwSelectSeason-dropdown-menu",r).css("display")=="none"?(n(".gwSelectSeason-dropdown-menu",r).css("display","block"),!0):!1},e=function(){return n(".gwSelectSeason-dropdown-menu",r).css("display")=="block"?(n(".gwSelectSeason-dropdown-menu",r).css("display","none"),!0):!1},c=function(){var t=parseInt(n(".switch",r).text());t-1>1900&&n(".switch",r).text(t-1)},l=function(){var t=parseInt(n(".switch",r).text());t+1>1900&&n(".switch",r).text(t+1)},o=function(){n(".season",r).removeClass("active").val("")},a=function(){n(".gwSelectSeason-form",r).text(n(".switch",r).text()+"年"+n(".season.active",r).text());r.val({year:n(".switch",r).text(),season:n(".active",n(".season",i).parent()).data("season")})},v=function(){return typeof f.onSelect=="function"?f.onSelect()==!1?!1:!0:!0},y=function(){n(".gwSelectSeason-form",r).on("click",function(){e()||h()});n(".prev",r).on("click",function(){o();c()});n(".next",r).on("click",function(){o();l()});n(".season",r).on("click",function(){n(".season",r).removeClass("active");n(this).addClass("active");e();v&&a()});n(document).on("click",function(t){(r.find(n(t.target)).length==0||n(t.target).closest(".gwSelectSeason").length==0)&&e()})};s();y()})}})(jQuery);